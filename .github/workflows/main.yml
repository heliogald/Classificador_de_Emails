name: Sincronizar com o Hub do Hugging Face # Chave 'name'
on: # Chave 'on' (Seu 'sobre')
  push:
    branches: [main]
  workflow_dispatch:

jobs: # Chave 'jobs' (Seu 'empregos') - Esta é a chave obrigatória que estava faltando.
  Sincronizar-com-o-hub:
    runs-on: ubuntu-latest
    steps: # Chave 'steps' (Seu 'passos')
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
          lfs: true
          
      # 1. PASSO DE CORREÇÃO: Puxar (pull) as alterações do Hub (para resolver o erro 'fetch first')
      - name: Sincronizar localmente com o Hub
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
        run: git pull https://Helio00:$HF_TOKEN@huggingface.co/spaces/Helio00/Classificador_de_Emalis main

      # 2. PASSO DE ENVIO: Enviar para o Hub
      - name: Enviar para o Hub
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
        run: git push https://Helio00:$HF_TOKEN@huggingface.co/spaces/Helio00/Classificador_de_Emalis main
